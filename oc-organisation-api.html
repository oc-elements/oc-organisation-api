<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../oc-core-utils/oc-api-provider-behaviour.html">

<dom-module id="oc-organisation-api">
  <template>
    <iron-ajax id="getOrganisationTypes"></iron-ajax>
    <iron-ajax id="getOrganisationIndustries"></iron-ajax>
    <iron-ajax id="createOrganisation"></iron-ajax>
  </template>

  <script>(function(){
    Polymer({
      is: 'oc-organisation-api',
      behaviors: [OC.Behaviours.ApiProvider],

      /**
       * Retrieve all Ordercloud supported organisation types
       *
       * @return {Promise}
       */
      getOrganisationTypes: function() {
        this.$.getOrganisationTypes.url = this._url('organisations/types');
        return this._generateRequest(this.$.getOrganisationTypes);
      },

      /**
       * Retrieve all Ordercloud supported industries
       *
       * @return {Promise}
       */
      getOrganisationIndustries: function() {
        this.$.getOrganisationIndustries.url = this._url('industry');
        return this._generateRequest(this.$.getOrganisationIndustries);
      },

      /**
       * Create a new organisation
       *
       * @return {Promise}
       */
      createOrganisation: function(newOrganisation) {
        this.$.createOrganisation.url = this._url('organisations');
        this.$.createOrganisation.method = "POST";
        this.$.createOrganisation.contentType = "application/json";
        this.$.createOrganisation.body = newOrganisation;
        return this._generateRequest(this.$.createOrganisation);
      }
    });
  })();
  </script>
</dom-module>
